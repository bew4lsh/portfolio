---
import BaseLayout from '../layouts/BaseLayout.astro';
import PlotlyChart from '../components/PlotlyChart.astro';

// Sample chart data for testing theme integration
const sampleBarData = [
  {
    x: ['Jan', 'Feb', 'Mar', 'Apr', 'May'],
    y: [20, 14, 23, 25, 22],
    type: 'bar',
    name: 'Revenue'
  }
];

const sampleLineData = [
  {
    x: [1, 2, 3, 4, 5],
    y: [10, 11, 12, 13, 14],
    type: 'scatter',
    mode: 'lines+markers',
    name: 'Growth'
  },
  {
    x: [1, 2, 3, 4, 5],
    y: [16, 15, 14, 13, 12],
    type: 'scatter',
    mode: 'lines+markers',
    name: 'Decline'
  }
];

const samplePieData = [
  {
    values: [19, 26, 55],
    labels: ['Residential', 'Commercial', 'Industrial'],
    type: 'pie'
  }
];

const defaultLayout = {
  title: 'Sample Chart',
  showlegend: true
};
---

<BaseLayout
  title="Chart Theming Test"
  description="Testing theme-aware Plotly.js charts"
>
  <div class="stack gap-20 lg:gap-48">
    <div class="wrapper stack gap-8 lg:gap-20">
      <header class="hero">
        <div class="stack gap-2">
          <h1 class="title">Chart Theming Test</h1>
          <p class="tagline">Testing theme-aware Plotly.js charts across all color themes</p>
        </div>
      </header>

      <main class="wrapper">
        <div class="stack gap-10">
          <section>
            <h2>Presentation Chart (Bar)</h2>
            <p>Vibrant colors for visual impact</p>
            <PlotlyChart
              id="test-bar-presentation"
              data={sampleBarData}
              layout={{ ...defaultLayout, title: 'Monthly Revenue' }}
              height="400px"
              chartPurpose="presentation"
              priority="accent"
            />
          </section>

          <section>
            <h2>Analytical Chart (Multi-Line)</h2>
            <p>High contrast with detailed interaction</p>
            <PlotlyChart
              id="test-line-analytical"
              data={sampleLineData}
              layout={{ ...defaultLayout, title: 'Trend Analysis', hovermode: 'x unified' }}
              height="400px"
              chartPurpose="analytical"
              priority="primary"
            />
          </section>

          <section>
            <h2>Dashboard Chart (Pie)</h2>
            <p>Balanced colors for dashboard integration</p>
            <PlotlyChart
              id="test-pie-dashboard"
              data={samplePieData}
              layout={{ ...defaultLayout, title: 'Market Segments' }}
              height="400px"
              chartPurpose="dashboard"
              priority="primary"
            />
          </section>

          <section>
            <h2>Dense Data Example</h2>
            <p>Subtle colors for data-dense visualization</p>
            <PlotlyChart
              id="test-dense"
              data={[{
                x: Array.from({length: 50}, (_, i) => i),
                y: Array.from({length: 50}, () => Math.random() * 100),
                type: 'scatter',
                mode: 'markers',
                name: 'Dense Data'
              }]}
              layout={{ ...defaultLayout, title: 'Dense Scatter Plot' }}
              height="400px"
              chartPurpose="analytical"
            />
          </section>
        </div>
      </main>
    </div>
  </div>
</BaseLayout>

<style>
  .hero {
    text-align: center;
    padding: 2rem 0;
  }

  .title {
    font-size: var(--text-2xl); /* Reduced from 3xl to 2xl */
    color: var(--gray-0);
  }

  .tagline {
    font-size: var(--text-lg);
    color: var(--gray-300);
  }

  section {
    margin-bottom: 3rem;
  }

  section h2 {
    font-size: var(--text-xl);
    color: var(--gray-100);
    margin-bottom: 1rem;
  }
</style>

<script>
  // Load Plotly.js from CDN for testing
  if (typeof window !== 'undefined' && !window.Plotly) {
    const script = document.createElement('script');
    script.src = 'https://cdn.plot.ly/plotly-2.26.0.min.js';
    script.async = true;
    document.head.appendChild(script);
  }
</script>